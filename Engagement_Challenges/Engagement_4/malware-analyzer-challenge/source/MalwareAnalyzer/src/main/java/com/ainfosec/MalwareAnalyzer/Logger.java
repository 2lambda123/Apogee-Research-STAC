package com.ainfosec.MalwareAnalyzer;

import java.io.FileWriter;
import java.io.IOException;

/**
 * Logs out request responses to disk.
 */
public final class Logger
{
	private static FileWriter out = null;
	private static Boolean initialized = false;
		
	/**
	 * Open the log file for writing.  Must be called before write_log_entry().
	 * @param log_file Path to log file.
	 */
	public static void initialize(String log_file)
	{
		try
		{
			out = new FileWriter(log_file);
		}
		catch (IOException e1)
		{
			System.out.println("Error creating log file, exiting.");
			System.exit(0);
		}
		initialized = true;
	}
	
	/**
	 * Write an entry to the log file.
	 * @param message Message to be written.
	 */
	public static void write_log_entry(String message)
	{
		if(initialized)
		{
			try
			{
				out.write(message);

			}
			catch(IOException e)
			{
				System.out.println("Error writing to log, exiting.");
				System.exit(1);
			}			
		}
		return;
	}
	
	/**
	 * Close the log file.
	 */
	public static void close_log()
	{
		try
		{
			out.close();
		} catch (IOException e)
		{
			System.out.println("Error closing log, exiting.");
			System.exit(1);
		}
		return;
	}
}
